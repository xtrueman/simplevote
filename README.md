# SimpleVote - Система голосования

Веб-приложение для голосования за выступающих на мероприятиях.

## Быстрый старт

### 1. Установка зависимостей

```bash
pip install -r requirements.txt
```

### 2. Запуск сервера

```bash
python app.py
```

Сервер запустится на `http://localhost:8000`

### 3. Открытие интерфейсов

- **Пользовательский интерфейс** (для голосующих): откройте `index.html` в браузере
- **Админ-панель** (для управления): откройте `admin.html` в браузере

## Использование

### Workflow голосования

1. **Админ-панель** (`admin.html`):
   - Введите имя первого участника (например: "Иван Иванов")
   - Нажмите "Начать голосование за участника"
   - Статус изменится на "Идёт голосование"

2. **Пользовательский интерфейс** (`index.html`):
   - Страница автоматически покажет интерфейс голосования
   - Пользователи выбирают количество звёзд (1-5)
   - Нажимают "Голосовать ещё" (для передачи другому) или "Далее" (для следующего участника)

3. **Переход к следующему участнику**:
   - В админ-панели введите имя следующего участника
   - Нажмите "Начать голосование за участника"
   - На всех устройствах автоматически откроется голосование за нового участника

4. **Завершение голосования**:
   - В админ-панели нажмите "Завершить голосование"
   - На всех устройствах автоматически отобразятся результаты

5. **Просмотр результатов**:
   - В админ-панели нажмите "Показать результаты"
   - Участники отсортированы по рейтингу (среднее значение голосов)

## API Endpoints

### `GET /status`
Получить текущий статус голосования

**Ответ:**
```json
{
  "status": "VOTING",
  "personnum": 1,
  "description": "Иван Иванов"
}
```

Возможные статусы:
- `VOTING_NOT_STARTED` - голосование не начато
- `VOTING` - идёт голосование
- `VOTING_FINISHED` - голосование завершено

### `POST /vote?personnum=1&rating=5`
Отправить голос

**Параметры:**
- `personnum` - номер участника (1, 2, 3...)
- `rating` - оценка от 1 до 5

**Ответ:**
```json
{
  "success": true,
  "message": "Голос принят"
}
```

### `POST /setcurrentperson?description=Имя`
Установить текущего участника (админская функция)

**Параметры:**
- `description` - имя/описание участника
- Специальное значение `VOTING_FINISHED` завершает голосование

### `GET /getresults`
Получить результаты голосования

**Ответ:**
```json
[
  {
    "personnum": 3,
    "description": "Алексей Сидоров",
    "rating": 4.8
  },
  {
    "personnum": 1,
    "description": "Иван Иванов",
    "rating": 4.6
  }
]
```

## Тестирование

Запустите тестовый скрипт:

```bash
python test_api.py
```

Скрипт автоматически:
1. Создаст 3 участников
2. Отправит голоса за каждого
3. Завершит голосование
4. Покажет результаты

## Технологии

- **Backend**: FastAPI + Uvicorn
- **Frontend**: HTML + CSS + JavaScript (Vanilla)
- **Хранилище**: In-memory (без БД)

## Архитектура

```
simplevote/
├── app.py              # FastAPI backend
├── index.html          # Пользовательский интерфейс
├── admin.html          # Админ-панель
├── test_api.py         # Тестовый скрипт
├── requirements.txt    # Python зависимости
├── AGENTS.md          # Документация проекта
└── README.md          # Инструкции
```

## Особенности

✅ SPA (Single Page Application) без перезагрузки страницы
✅ Автоматический polling статуса каждые 500ms
✅ Синхронизация между всеми устройствами
✅ Множественное голосование с одного устройства
✅ Визуальные эффекты и анимации
✅ Мобильная оптимизация
✅ CORS включён для разработки

## Примечания

- Данные хранятся в памяти процесса (сбрасываются при перезапуске)
- Один процесс сервера обслуживает всё мероприятие
- Рейтинг рассчитывается как среднее арифметическое всех голосов
- Система рассчитана на честность участников
